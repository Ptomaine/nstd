<HTML><HEAD><TITLE>Anti-Grain Geometry - </TITLE>
<META http-equiv="Content-Type" content="text/html"/>
<LINK rel="stylesheet" type="text/css" href="../agg.styles.css"/>
</HEAD>
<TABLE width="640px" border="0" cellspacing="0" cellpadding="0"><TR><TD><PRE><SPAN class="kw2">#include</SPAN> <SPAN class="op">&lt;</SPAN>math<SPAN class="op">.</SPAN>h<SPAN class="op">&gt;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="op">&lt;</SPAN>stdio<SPAN class="op">.</SPAN>h<SPAN class="op">&gt;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="op">&lt;</SPAN>time<SPAN class="op">.</SPAN>h<SPAN class="op">&gt;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_rendering_buffer.h.html">agg_rendering_buffer.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_conv_transform.h.html">agg_conv_transform.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_conv_stroke.h.html">agg_conv_stroke.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_conv_dash.h.html">agg_conv_dash.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_scanline_u.h.html">agg_scanline_u.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_renderer_scanline.h.html">agg_renderer_scanline.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_rasterizer_outline_aa.h.html">agg_rasterizer_outline_aa.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_rasterizer_scanline_aa.h.html">agg_rasterizer_scanline_aa.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_pattern_filters_rgba.h.html">agg_pattern_filters_rgba.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_renderer_outline_aa.h.html">agg_renderer_outline_aa.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_renderer_outline_image.h.html">agg_renderer_outline_image.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_arc.h.html">agg_arc.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_bezier_arc.h.html">agg_bezier_arc.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;<A href="../__code/include/agg_pixfmt_rgb.h.html">agg_pixfmt_rgb.h</A>&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;ctrl/agg_slider_ctrl.h&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;ctrl/agg_bezier_ctrl.h&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;ctrl/agg_rbox_ctrl.h&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;ctrl/agg_cbox_ctrl.h&quot;</SPAN>
<SPAN class="kw2">#include</SPAN> <SPAN class="str">&quot;platform/agg_platform_support.h&quot;</SPAN>


<SPAN class="kw1">enum</SPAN> flip_y_e <SPAN class="op">{</SPAN> flip_y <SPAN class="op">=</SPAN> <SPAN class="kw1">true</SPAN> <SPAN class="op">}</SPAN><SPAN class="op">;</SPAN>

<SPAN class="kw1">typedef</SPAN> agg::<A href="../__code/include/agg_pixfmt_rgb.h.html#pixfmt_bgr24">pixfmt_bgr24</A> <A href="../doc/basic_renderers/basic_renderers.agdoc.html#pixfmt">pixfmt</A><SPAN class="op">;</SPAN>


<SPAN class="kw1">void</SPAN> bezier4_point<SPAN class="op">(</SPAN><SPAN class="kw1">double</SPAN> x1<SPAN class="op">,</SPAN> <SPAN class="kw1">double</SPAN> y1<SPAN class="op">,</SPAN> <SPAN class="kw1">double</SPAN> x2<SPAN class="op">,</SPAN> <SPAN class="kw1">double</SPAN> y2<SPAN class="op">,</SPAN>
                   <SPAN class="kw1">double</SPAN> x3<SPAN class="op">,</SPAN> <SPAN class="kw1">double</SPAN> y3<SPAN class="op">,</SPAN> <SPAN class="kw1">double</SPAN> x4<SPAN class="op">,</SPAN> <SPAN class="kw1">double</SPAN> y4<SPAN class="op">,</SPAN>
                   <SPAN class="kw1">double</SPAN> mu<SPAN class="op">,</SPAN>
                   <SPAN class="kw1">double</SPAN><SPAN class="op">*</SPAN> x<SPAN class="op">,</SPAN> <SPAN class="kw1">double</SPAN><SPAN class="op">*</SPAN> y<SPAN class="op">)</SPAN>
<SPAN class="op">{</SPAN>
   <SPAN class="kw1">double</SPAN> mum1<SPAN class="op">,</SPAN> mum13<SPAN class="op">,</SPAN> mu3<SPAN class="op">;</SPAN>

   mum1 <SPAN class="op">=</SPAN> <SPAN class="num">1</SPAN> <SPAN class="op">-</SPAN> mu<SPAN class="op">;</SPAN>
   mum13 <SPAN class="op">=</SPAN> mum1 <SPAN class="op">*</SPAN> mum1 <SPAN class="op">*</SPAN> mum1<SPAN class="op">;</SPAN>
   mu3 <SPAN class="op">=</SPAN> mu <SPAN class="op">*</SPAN> mu <SPAN class="op">*</SPAN> mu<SPAN class="op">;</SPAN>

   <SPAN class="op">*</SPAN>x <SPAN class="op">=</SPAN> mum13<SPAN class="op">*</SPAN>x1 <SPAN class="op">+</SPAN> <SPAN class="num">3</SPAN><SPAN class="op">*</SPAN>mu<SPAN class="op">*</SPAN>mum1<SPAN class="op">*</SPAN>mum1<SPAN class="op">*</SPAN>x2 <SPAN class="op">+</SPAN> <SPAN class="num">3</SPAN><SPAN class="op">*</SPAN>mu<SPAN class="op">*</SPAN>mu<SPAN class="op">*</SPAN>mum1<SPAN class="op">*</SPAN>x3 <SPAN class="op">+</SPAN> mu3<SPAN class="op">*</SPAN>x4<SPAN class="op">;</SPAN>
   <SPAN class="op">*</SPAN>y <SPAN class="op">=</SPAN> mum13<SPAN class="op">*</SPAN>y1 <SPAN class="op">+</SPAN> <SPAN class="num">3</SPAN><SPAN class="op">*</SPAN>mu<SPAN class="op">*</SPAN>mum1<SPAN class="op">*</SPAN>mum1<SPAN class="op">*</SPAN>y2 <SPAN class="op">+</SPAN> <SPAN class="num">3</SPAN><SPAN class="op">*</SPAN>mu<SPAN class="op">*</SPAN>mu<SPAN class="op">*</SPAN>mum1<SPAN class="op">*</SPAN>y3 <SPAN class="op">+</SPAN> mu3<SPAN class="op">*</SPAN>y4<SPAN class="op">;</SPAN>
<SPAN class="op">}</SPAN>




<SPAN class="kw1">class</SPAN> the_application : <SPAN class="kw1">public</SPAN> agg::platform_support
<SPAN class="op">{</SPAN>
    agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A> m_ctrl_color<SPAN class="op">;</SPAN>
    agg::bezier_ctrl<SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A><SPAN class="op">&gt;</SPAN> m_curve1<SPAN class="op">;</SPAN>
    agg::slider_ctrl<SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A><SPAN class="op">&gt;</SPAN> m_angle_tolerance<SPAN class="op">;</SPAN>
    agg::slider_ctrl<SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A><SPAN class="op">&gt;</SPAN> m_approximation_scale<SPAN class="op">;</SPAN>
    agg::slider_ctrl<SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A><SPAN class="op">&gt;</SPAN> m_cusp_limit<SPAN class="op">;</SPAN>
    agg::slider_ctrl<SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A><SPAN class="op">&gt;</SPAN> m_width<SPAN class="op">;</SPAN>
    agg::cbox_ctrl<SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A><SPAN class="op">&gt;</SPAN>   m_show_points<SPAN class="op">;</SPAN>
    agg::cbox_ctrl<SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A><SPAN class="op">&gt;</SPAN>   m_show_outline<SPAN class="op">;</SPAN>
    agg::rbox_ctrl<SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A><SPAN class="op">&gt;</SPAN>   m_curve_type<SPAN class="op">;</SPAN>
    agg::rbox_ctrl<SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A><SPAN class="op">&gt;</SPAN>   m_case_type<SPAN class="op">;</SPAN>
    agg::rbox_ctrl<SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A><SPAN class="op">&gt;</SPAN>   m_inner_join<SPAN class="op">;</SPAN>
    agg::rbox_ctrl<SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A><SPAN class="op">&gt;</SPAN>   m_line_join<SPAN class="op">;</SPAN>
    agg::rbox_ctrl<SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba8">rgba8</A><SPAN class="op">&gt;</SPAN>   m_line_cap<SPAN class="op">;</SPAN>

    <SPAN class="kw1">int</SPAN> m_cur_case_type<SPAN class="op">;</SPAN>

<SPAN class="kw1">public</SPAN>:
    <SPAN class="kw1">typedef</SPAN> agg::<A href="../doc/basic_renderers/basic_renderers.agdoc.html#renderer_base">renderer_base</A><SPAN class="op">&lt;</SPAN><A href="../doc/basic_renderers/basic_renderers.agdoc.html#pixfmt">pixfmt</A><SPAN class="op">&gt;</SPAN> <A href="../doc/basic_renderers/basic_renderers.agdoc.html#renderer_base">renderer_base</A><SPAN class="op">;</SPAN>
    <SPAN class="kw1">typedef</SPAN> agg::<A href="../__code/include/agg_renderer_scanline.h.html#renderer_scanline_aa_solid">renderer_scanline_aa_solid</A><SPAN class="op">&lt;</SPAN><A href="../doc/basic_renderers/basic_renderers.agdoc.html#renderer_base">renderer_base</A><SPAN class="op">&gt;</SPAN> renderer_scanline<SPAN class="op">;</SPAN>
    <SPAN class="kw1">typedef</SPAN> agg::<A href="../__code/include/agg_rasterizer_scanline_aa.h.html#rasterizer_scanline_aa">rasterizer_scanline_aa</A><SPAN class="op">&lt;</SPAN><SPAN class="op">&gt;</SPAN> rasterizer_scanline<SPAN class="op">;</SPAN>
    <SPAN class="kw1">typedef</SPAN> agg::<A href="../__code/include/agg_scanline_u.h.html#scanline_u8">scanline_u8</A> scanline<SPAN class="op">;</SPAN>


    the_application<SPAN class="op">(</SPAN>agg::pix_format_e format<SPAN class="op">,</SPAN> <SPAN class="kw1">bool</SPAN> flip_y<SPAN class="op">)</SPAN> :
        agg::platform_support<SPAN class="op">(</SPAN>format<SPAN class="op">,</SPAN> flip_y<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_ctrl_color<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba">rgba</A><SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">.</SPAN><SPAN class="num">3</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">.</SPAN><SPAN class="num">5</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">.</SPAN><SPAN class="num">8</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_angle_tolerance    <SPAN class="op">(</SPAN><SPAN class="num">5</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>       <SPAN class="num">5</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">240</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>       <SPAN class="num">12</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>  <SPAN class="op">!</SPAN>flip_y<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_approximation_scale<SPAN class="op">(</SPAN><SPAN class="num">5</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>    <SPAN class="num">17</SPAN><SPAN class="op">+</SPAN><SPAN class="num">5</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">240</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>    <SPAN class="num">17</SPAN><SPAN class="op">+</SPAN><SPAN class="num">12</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>  <SPAN class="op">!</SPAN>flip_y<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_cusp_limit         <SPAN class="op">(</SPAN><SPAN class="num">5</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">17</SPAN><SPAN class="op">+</SPAN><SPAN class="num">17</SPAN><SPAN class="op">+</SPAN><SPAN class="num">5</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">240</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">17</SPAN><SPAN class="op">+</SPAN><SPAN class="num">17</SPAN><SPAN class="op">+</SPAN><SPAN class="num">12</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>  <SPAN class="op">!</SPAN>flip_y<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_width              <SPAN class="op">(</SPAN><SPAN class="num">245</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>     <SPAN class="num">5</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">495</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>       <SPAN class="num">12</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>  <SPAN class="op">!</SPAN>flip_y<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_show_points        <SPAN class="op">(</SPAN><SPAN class="num">250</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">15</SPAN><SPAN class="op">+</SPAN><SPAN class="num">5</SPAN><SPAN class="op">,</SPAN> <SPAN class="str">&quot;Show Points&quot;</SPAN><SPAN class="op">,</SPAN>         <SPAN class="op">!</SPAN>flip_y<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_show_outline       <SPAN class="op">(</SPAN><SPAN class="num">250</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">30</SPAN><SPAN class="op">+</SPAN><SPAN class="num">5</SPAN><SPAN class="op">,</SPAN> <SPAN class="str">&quot;Show Stroke Outline&quot;</SPAN><SPAN class="op">,</SPAN> <SPAN class="op">!</SPAN>flip_y<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_curve_type         <SPAN class="op">(</SPAN><SPAN class="num">535</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>   <SPAN class="num">5</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">535</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">+</SPAN><SPAN class="num">115</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>   <SPAN class="num">55</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>  <SPAN class="op">!</SPAN>flip_y<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_case_type          <SPAN class="op">(</SPAN><SPAN class="num">535</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>  <SPAN class="num">60</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">535</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">+</SPAN><SPAN class="num">115</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>   <SPAN class="num">195</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="op">!</SPAN>flip_y<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_inner_join         <SPAN class="op">(</SPAN><SPAN class="num">535</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">200</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">535</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">+</SPAN><SPAN class="num">115</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>   <SPAN class="num">290</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="op">!</SPAN>flip_y<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_line_join          <SPAN class="op">(</SPAN><SPAN class="num">535</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">295</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">535</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">+</SPAN><SPAN class="num">115</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>   <SPAN class="num">385</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="op">!</SPAN>flip_y<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_line_cap           <SPAN class="op">(</SPAN><SPAN class="num">535</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">395</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">535</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">+</SPAN><SPAN class="num">115</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN>   <SPAN class="num">455</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="op">!</SPAN>flip_y<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
        m_cur_case_type<SPAN class="op">(</SPAN><SPAN class="op">-</SPAN><SPAN class="num">1</SPAN><SPAN class="op">)</SPAN>
    <SPAN class="op">{</SPAN>
        m_curve1<SPAN class="op">.</SPAN>line_color<SPAN class="op">(</SPAN>m_ctrl_color<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        m_curve1<SPAN class="op">.</SPAN>curve<SPAN class="op">(</SPAN><SPAN class="num">170</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">424</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">13</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">87</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">488</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">423</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">26</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">333</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="rem">//m_curve1.curve(26.000, 333.000, 276.000, 126.000, 402.000, 479.000, 26.000, 333.000); // Loop with p1==p4</SPAN>
        <SPAN class="rem">//m_curve1.curve(378.000, 439.000, 378.000, 497.000, 487.000, 432.000, 14.000, 338.000); // Narrow loop</SPAN>
        <SPAN class="rem">//m_curve1.curve(288.000, 283.000, 232.000, 89.000, 66.000, 197.000, 456.000, 241.000); // Loop</SPAN>
        <SPAN class="rem">//m_curve1.curve(519.000, 142.000, 97.000, 147.000, 69.000, 147.000, 30.000, 144.000); // Almost straight</SPAN>
        <SPAN class="rem">//m_curve1.curve(100, 100, 200, 100, 100, 200, 200, 200); // A &quot;Z&quot; case</SPAN>
        <SPAN class="rem">//m_curve1.curve(150, 150, 350, 150, 150, 150, 350, 150); // Degenerate</SPAN>
        <SPAN class="rem">//m_curve1.curve(409, 330, 300, 200, 200, 200, 401, 263); // Strange cusp</SPAN>
        <SPAN class="rem">//m_curve1.curve(129, 233, 172, 320, 414, 253, 344, 236); // Curve cap</SPAN>
        <SPAN class="rem">//m_curve1.curve(100,100, 100,200, 100,100, 110,100); // A &quot;boot&quot;</SPAN>
        <SPAN class="rem">//m_curve1.curve(225, 150, 60, 150, 460, 150, 295, 150); // 2----1----4----3</SPAN>
        <SPAN class="rem">//m_curve1.curve(162.2, 248.801, 162.2, 248.801, 266, 284, 394, 335);  // Coinciding 1-2</SPAN>
        <SPAN class="rem">//m_curve1.curve(162.200, 248.801, 162.200, 248.801, 257.000, 301.000, 394.000, 335.000); // Coinciding 1-2</SPAN>
        <SPAN class="rem">//m_curve1.curve(394.000, 335.000, 257.000, 301.000, 162.200, 248.801, 162.200, 248.801); // Coinciding 3-4</SPAN>
        <SPAN class="rem">//m_curve1.curve(84.200000,302.80100, 84.200000,302.80100, 79.000000,292.40100, 97.001000,304.40100); // From tiger.svg</SPAN>
        <SPAN class="rem">//m_curve1.curve(97.001000,304.40100, 79.000000,292.40100, 84.200000,302.80100, 84.200000,302.80100); // From tiger.svg opposite dir</SPAN>
        <SPAN class="rem">//m_curve1.curve(475, 157, 200, 100, 453, 100, 222, 157); // Cusp, failure for Adobe SVG</SPAN>
        add_ctrl<SPAN class="op">(</SPAN>m_curve1<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_curve1<SPAN class="op">.</SPAN>no_transform<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        m_angle_tolerance<SPAN class="op">.</SPAN>label<SPAN class="op">(</SPAN><SPAN class="str">&quot;Angle Tolerance=%.0f deg&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_angle_tolerance<SPAN class="op">.</SPAN>range<SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">90</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_angle_tolerance<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="num">15</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        add_ctrl<SPAN class="op">(</SPAN>m_angle_tolerance<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_angle_tolerance<SPAN class="op">.</SPAN>no_transform<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        m_approximation_scale<SPAN class="op">.</SPAN>label<SPAN class="op">(</SPAN><SPAN class="str">&quot;Approximation Scale=%.3f&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_approximation_scale<SPAN class="op">.</SPAN>range<SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">.</SPAN><SPAN class="num">1</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">5</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_approximation_scale<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="num">1</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        add_ctrl<SPAN class="op">(</SPAN>m_approximation_scale<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_approximation_scale<SPAN class="op">.</SPAN>no_transform<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        m_cusp_limit<SPAN class="op">.</SPAN>label<SPAN class="op">(</SPAN><SPAN class="str">&quot;Cusp Limit=%.0f deg&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_cusp_limit<SPAN class="op">.</SPAN>range<SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">90</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_cusp_limit<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        add_ctrl<SPAN class="op">(</SPAN>m_cusp_limit<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_cusp_limit<SPAN class="op">.</SPAN>no_transform<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        m_width<SPAN class="op">.</SPAN>label<SPAN class="op">(</SPAN><SPAN class="str">&quot;Width=%.2f&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_width<SPAN class="op">.</SPAN>range<SPAN class="op">(</SPAN><SPAN class="op">-</SPAN><SPAN class="num">50</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">100</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_width<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="num">50</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        add_ctrl<SPAN class="op">(</SPAN>m_width<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_width<SPAN class="op">.</SPAN>no_transform<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        add_ctrl<SPAN class="op">(</SPAN>m_show_points<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_show_points<SPAN class="op">.</SPAN>no_transform<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_show_points<SPAN class="op">.</SPAN>status<SPAN class="op">(</SPAN><SPAN class="kw1">true</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        add_ctrl<SPAN class="op">(</SPAN>m_show_outline<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_show_outline<SPAN class="op">.</SPAN>no_transform<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_show_outline<SPAN class="op">.</SPAN>status<SPAN class="op">(</SPAN><SPAN class="kw1">true</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        m_curve_type<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Incremental&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_curve_type<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Subdiv&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_curve_type<SPAN class="op">.</SPAN>cur_item<SPAN class="op">(</SPAN><SPAN class="num">1</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        add_ctrl<SPAN class="op">(</SPAN>m_curve_type<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_curve_type<SPAN class="op">.</SPAN>no_transform<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        m_case_type<SPAN class="op">.</SPAN>text_size<SPAN class="op">(</SPAN><SPAN class="num">7</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_case_type<SPAN class="op">.</SPAN>text_thickness<SPAN class="op">(</SPAN><SPAN class="num">1</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_case_type<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Random&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_case_type<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;13---24&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_case_type<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Smooth Cusp 1&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_case_type<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Smooth Cusp 2&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_case_type<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Real Cusp 1&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_case_type<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Real Cusp 2&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_case_type<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Fancy Stroke&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_case_type<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Jaw&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_case_type<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Ugly Jaw&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        add_ctrl<SPAN class="op">(</SPAN>m_case_type<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_case_type<SPAN class="op">.</SPAN>no_transform<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        m_inner_join<SPAN class="op">.</SPAN>text_size<SPAN class="op">(</SPAN><SPAN class="num">8</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_inner_join<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Inner Bevel&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_inner_join<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Inner Miter&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_inner_join<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Inner Jag&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_inner_join<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Inner Round&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_inner_join<SPAN class="op">.</SPAN>cur_item<SPAN class="op">(</SPAN><SPAN class="num">3</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        add_ctrl<SPAN class="op">(</SPAN>m_inner_join<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_inner_join<SPAN class="op">.</SPAN>no_transform<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        m_line_join<SPAN class="op">.</SPAN>text_size<SPAN class="op">(</SPAN><SPAN class="num">8</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_line_join<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Miter Join&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_line_join<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Miter Revert&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_line_join<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Round Join&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_line_join<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Bevel Join&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_line_join<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Miter Round&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        m_line_join<SPAN class="op">.</SPAN>cur_item<SPAN class="op">(</SPAN><SPAN class="num">1</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        add_ctrl<SPAN class="op">(</SPAN>m_line_join<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_line_join<SPAN class="op">.</SPAN>no_transform<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        m_line_cap<SPAN class="op">.</SPAN>text_size<SPAN class="op">(</SPAN><SPAN class="num">8</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_line_cap<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Butt Cap&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_line_cap<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Square Cap&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_line_cap<SPAN class="op">.</SPAN>add_item<SPAN class="op">(</SPAN><SPAN class="str">&quot;Round Cap&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_line_cap<SPAN class="op">.</SPAN>cur_item<SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        add_ctrl<SPAN class="op">(</SPAN>m_line_cap<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        m_line_cap<SPAN class="op">.</SPAN>no_transform<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
    <SPAN class="op">}</SPAN>


    <SPAN class="kw1">template</SPAN><SPAN class="op">&lt;</SPAN><SPAN class="kw1">class</SPAN> Curve<SPAN class="op">&gt;</SPAN> <SPAN class="kw1">double</SPAN> measure_time<SPAN class="op">(</SPAN>Curve<SPAN class="op">&amp;</SPAN> curve<SPAN class="op">)</SPAN>
    <SPAN class="op">{</SPAN>
        start_timer<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">for</SPAN><SPAN class="op">(</SPAN><SPAN class="kw1">int</SPAN> i <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN> i <SPAN class="op">&lt;</SPAN> <SPAN class="num">100</SPAN><SPAN class="op">;</SPAN> i<SPAN class="op">++</SPAN><SPAN class="op">)</SPAN>
        <SPAN class="op">{</SPAN>
            <SPAN class="kw1">double</SPAN> x<SPAN class="op">,</SPAN> y<SPAN class="op">;</SPAN>
            curve<SPAN class="op">.</SPAN>init<SPAN class="op">(</SPAN>m_curve1<SPAN class="op">.</SPAN>x1<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y1<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                       m_curve1<SPAN class="op">.</SPAN>x2<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y2<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                       m_curve1<SPAN class="op">.</SPAN>x3<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y3<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                       m_curve1<SPAN class="op">.</SPAN>x4<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y4<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            curve<SPAN class="op">.</SPAN>rewind<SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            <SPAN class="kw1">while</SPAN><SPAN class="op">(</SPAN><SPAN class="op">!</SPAN>agg::<A href="../__code/include/agg_basics.h.html#is_stop">is_stop</A><SPAN class="op">(</SPAN>curve<SPAN class="op">.</SPAN>vertex<SPAN class="op">(</SPAN><SPAN class="op">&amp;</SPAN>x<SPAN class="op">,</SPAN> <SPAN class="op">&amp;</SPAN>y<SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="op">}</SPAN>
        <SPAN class="kw1">return</SPAN> elapsed_time<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">*</SPAN> <SPAN class="num">10</SPAN><SPAN class="op">;</SPAN>
    <SPAN class="op">}</SPAN>


    <SPAN class="kw1">template</SPAN><SPAN class="op">&lt;</SPAN><SPAN class="kw1">class</SPAN> Path<SPAN class="op">&gt;</SPAN> 
    <SPAN class="kw1">bool</SPAN> find_point<SPAN class="op">(</SPAN><SPAN class="kw1">const</SPAN> Path<SPAN class="op">&amp;</SPAN> path<SPAN class="op">,</SPAN> <SPAN class="kw1">double</SPAN> dist<SPAN class="op">,</SPAN> <SPAN class="kw1">unsigned</SPAN><SPAN class="op">*</SPAN> i<SPAN class="op">,</SPAN> <SPAN class="kw1">unsigned</SPAN><SPAN class="op">*</SPAN> j<SPAN class="op">)</SPAN>
    <SPAN class="op">{</SPAN>
        <SPAN class="kw1">int</SPAN> k<SPAN class="op">;</SPAN>
        <SPAN class="op">*</SPAN>j <SPAN class="op">=</SPAN> path<SPAN class="op">.</SPAN>size<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">-</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">;</SPAN>
          
        <SPAN class="kw1">for</SPAN><SPAN class="op">(</SPAN><SPAN class="op">*</SPAN>i <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN> <SPAN class="op">(</SPAN><SPAN class="op">*</SPAN>j <SPAN class="op">-</SPAN> <SPAN class="op">*</SPAN>i<SPAN class="op">)</SPAN> <SPAN class="op">&gt;</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">;</SPAN> <SPAN class="op">)</SPAN> 
        <SPAN class="op">{</SPAN>
            <SPAN class="kw1">if</SPAN><SPAN class="op">(</SPAN>dist <SPAN class="op">&lt;</SPAN> path<SPAN class="op">[</SPAN>k <SPAN class="op">=</SPAN> <SPAN class="op">(</SPAN><SPAN class="op">*</SPAN>i <SPAN class="op">+</SPAN> <SPAN class="op">*</SPAN>j<SPAN class="op">)</SPAN> <SPAN class="op">&gt;&gt;</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>dist<SPAN class="op">)</SPAN> <SPAN class="op">*</SPAN>j <SPAN class="op">=</SPAN> k<SPAN class="op">;</SPAN> 
            <SPAN class="kw1">else</SPAN>                                     <SPAN class="op">*</SPAN>i <SPAN class="op">=</SPAN> k<SPAN class="op">;</SPAN>
        <SPAN class="op">}</SPAN>
        <SPAN class="kw1">return</SPAN> <SPAN class="kw1">true</SPAN><SPAN class="op">;</SPAN>
    <SPAN class="op">}</SPAN>

    <SPAN class="kw1">struct</SPAN> curve_point
    <SPAN class="op">{</SPAN>
        curve_point<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">{</SPAN><SPAN class="op">}</SPAN>
        curve_point<SPAN class="op">(</SPAN><SPAN class="kw1">double</SPAN> x1<SPAN class="op">,</SPAN> <SPAN class="kw1">double</SPAN> y1<SPAN class="op">,</SPAN> <SPAN class="kw1">double</SPAN> mu1<SPAN class="op">)</SPAN> : x<SPAN class="op">(</SPAN>x1<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> y<SPAN class="op">(</SPAN>y1<SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> mu<SPAN class="op">(</SPAN>mu1<SPAN class="op">)</SPAN> <SPAN class="op">{</SPAN><SPAN class="op">}</SPAN>
        <SPAN class="kw1">double</SPAN> x<SPAN class="op">,</SPAN> y<SPAN class="op">,</SPAN> dist<SPAN class="op">,</SPAN> mu<SPAN class="op">;</SPAN>
    <SPAN class="op">}</SPAN><SPAN class="op">;</SPAN>

    <SPAN class="kw1">template</SPAN><SPAN class="op">&lt;</SPAN><SPAN class="kw1">class</SPAN> Curve<SPAN class="op">&gt;</SPAN> <SPAN class="kw1">double</SPAN> calc_max_error<SPAN class="op">(</SPAN>Curve<SPAN class="op">&amp;</SPAN> curve<SPAN class="op">,</SPAN> <SPAN class="kw1">double</SPAN> scale<SPAN class="op">,</SPAN> 
                                                <SPAN class="kw1">double</SPAN><SPAN class="op">*</SPAN> max_angle_error<SPAN class="op">)</SPAN>
    <SPAN class="op">{</SPAN>
        curve<SPAN class="op">.</SPAN>approximation_scale<SPAN class="op">(</SPAN>m_approximation_scale<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">*</SPAN> scale<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        curve<SPAN class="op">.</SPAN>init<SPAN class="op">(</SPAN>m_curve1<SPAN class="op">.</SPAN>x1<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y1<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                   m_curve1<SPAN class="op">.</SPAN>x2<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y2<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                   m_curve1<SPAN class="op">.</SPAN>x3<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y3<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                   m_curve1<SPAN class="op">.</SPAN>x4<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y4<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        agg::<A href="../__code/include/agg_array.h.html#pod_bvector">pod_bvector</A><SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_vertex_sequence.h.html#vertex_dist">vertex_dist</A><SPAN class="op">,</SPAN> <SPAN class="num">8</SPAN><SPAN class="op">&gt;</SPAN> curve_points<SPAN class="op">;</SPAN>
        <SPAN class="kw1">unsigned</SPAN> cmd<SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> x<SPAN class="op">,</SPAN> y<SPAN class="op">;</SPAN>
        curve<SPAN class="op">.</SPAN>rewind<SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">while</SPAN><SPAN class="op">(</SPAN><SPAN class="op">!</SPAN>agg::<A href="../__code/include/agg_basics.h.html#is_stop">is_stop</A><SPAN class="op">(</SPAN>cmd <SPAN class="op">=</SPAN> curve<SPAN class="op">.</SPAN>vertex<SPAN class="op">(</SPAN><SPAN class="op">&amp;</SPAN>x<SPAN class="op">,</SPAN> <SPAN class="op">&amp;</SPAN>y<SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN>
        <SPAN class="op">{</SPAN>
            <SPAN class="kw1">if</SPAN><SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_basics.h.html#is_vertex">is_vertex</A><SPAN class="op">(</SPAN>cmd<SPAN class="op">)</SPAN><SPAN class="op">)</SPAN>
            <SPAN class="op">{</SPAN>
                curve_points<SPAN class="op">.</SPAN>add<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_vertex_sequence.h.html#vertex_dist">vertex_dist</A><SPAN class="op">(</SPAN>x<SPAN class="op">,</SPAN> y<SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            <SPAN class="op">}</SPAN>
        <SPAN class="op">}</SPAN>
        <SPAN class="kw1">unsigned</SPAN> i<SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> curve_dist <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">for</SPAN><SPAN class="op">(</SPAN>i <SPAN class="op">=</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">;</SPAN> i <SPAN class="op">&lt;</SPAN> curve_points<SPAN class="op">.</SPAN>size<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN> i<SPAN class="op">++</SPAN><SPAN class="op">)</SPAN>
        <SPAN class="op">{</SPAN>
            curve_points<SPAN class="op">[</SPAN>i <SPAN class="op">-</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>dist <SPAN class="op">=</SPAN> curve_dist<SPAN class="op">;</SPAN>
            curve_dist <SPAN class="op">+=</SPAN> agg::<A href="../__code/include/agg_math.h.html#calc_distance">calc_distance</A><SPAN class="op">(</SPAN>curve_points<SPAN class="op">[</SPAN>i<SPAN class="op">-</SPAN><SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>x<SPAN class="op">,</SPAN> curve_points<SPAN class="op">[</SPAN>i<SPAN class="op">-</SPAN><SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>y<SPAN class="op">,</SPAN> 
                                             curve_points<SPAN class="op">[</SPAN>i<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>x<SPAN class="op">,</SPAN>   curve_points<SPAN class="op">[</SPAN>i<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>y<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="op">}</SPAN>
        curve_points<SPAN class="op">[</SPAN>curve_points<SPAN class="op">.</SPAN>size<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">-</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>dist <SPAN class="op">=</SPAN> curve_dist<SPAN class="op">;</SPAN>
        
        agg::<A href="../__code/include/agg_array.h.html#pod_bvector">pod_bvector</A><SPAN class="op">&lt;</SPAN>curve_point<SPAN class="op">,</SPAN> <SPAN class="num">8</SPAN><SPAN class="op">&gt;</SPAN> reference_points<SPAN class="op">;</SPAN>
        <SPAN class="kw1">for</SPAN><SPAN class="op">(</SPAN>i <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN> i <SPAN class="op">&lt;</SPAN> <SPAN class="num">4096</SPAN><SPAN class="op">;</SPAN> i<SPAN class="op">++</SPAN><SPAN class="op">)</SPAN>
        <SPAN class="op">{</SPAN>
            <SPAN class="kw1">double</SPAN> mu <SPAN class="op">=</SPAN> i <SPAN class="op">/</SPAN> <SPAN class="num">4095</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
            bezier4_point<SPAN class="op">(</SPAN>m_curve1<SPAN class="op">.</SPAN>x1<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y1<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                          m_curve1<SPAN class="op">.</SPAN>x2<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y2<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                          m_curve1<SPAN class="op">.</SPAN>x3<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y3<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                          m_curve1<SPAN class="op">.</SPAN>x4<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y4<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                          mu<SPAN class="op">,</SPAN> <SPAN class="op">&amp;</SPAN>x<SPAN class="op">,</SPAN> <SPAN class="op">&amp;</SPAN>y<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            reference_points<SPAN class="op">.</SPAN>add<SPAN class="op">(</SPAN>curve_point<SPAN class="op">(</SPAN>x<SPAN class="op">,</SPAN> y<SPAN class="op">,</SPAN> mu<SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="op">}</SPAN>

        <SPAN class="kw1">double</SPAN> reference_dist <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">for</SPAN><SPAN class="op">(</SPAN>i <SPAN class="op">=</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">;</SPAN> i <SPAN class="op">&lt;</SPAN> reference_points<SPAN class="op">.</SPAN>size<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN> i<SPAN class="op">++</SPAN><SPAN class="op">)</SPAN>
        <SPAN class="op">{</SPAN>
            reference_points<SPAN class="op">[</SPAN>i <SPAN class="op">-</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>dist <SPAN class="op">=</SPAN> reference_dist<SPAN class="op">;</SPAN>
            reference_dist <SPAN class="op">+=</SPAN> agg::<A href="../__code/include/agg_math.h.html#calc_distance">calc_distance</A><SPAN class="op">(</SPAN>reference_points<SPAN class="op">[</SPAN>i<SPAN class="op">-</SPAN><SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>x<SPAN class="op">,</SPAN> reference_points<SPAN class="op">[</SPAN>i<SPAN class="op">-</SPAN><SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>y<SPAN class="op">,</SPAN> 
                                                 reference_points<SPAN class="op">[</SPAN>i<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>x<SPAN class="op">,</SPAN>   reference_points<SPAN class="op">[</SPAN>i<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>y<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="op">}</SPAN>
        reference_points<SPAN class="op">[</SPAN>reference_points<SPAN class="op">.</SPAN>size<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">-</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>dist <SPAN class="op">=</SPAN> reference_dist<SPAN class="op">;</SPAN>


        <SPAN class="kw1">unsigned</SPAN> idx1 <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">unsigned</SPAN> idx2 <SPAN class="op">=</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> max_error <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">for</SPAN><SPAN class="op">(</SPAN>i <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN> i <SPAN class="op">&lt;</SPAN> reference_points<SPAN class="op">.</SPAN>size<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN> i<SPAN class="op">++</SPAN><SPAN class="op">)</SPAN>
        <SPAN class="op">{</SPAN>
            <SPAN class="kw1">if</SPAN><SPAN class="op">(</SPAN>find_point<SPAN class="op">(</SPAN>curve_points<SPAN class="op">,</SPAN> reference_points<SPAN class="op">[</SPAN>i<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>dist<SPAN class="op">,</SPAN> <SPAN class="op">&amp;</SPAN>idx1<SPAN class="op">,</SPAN> <SPAN class="op">&amp;</SPAN>idx2<SPAN class="op">)</SPAN><SPAN class="op">)</SPAN>
            <SPAN class="op">{</SPAN>
                <SPAN class="kw1">double</SPAN> err <SPAN class="op">=</SPAN> fabs<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_math.h.html#calc_line_point_distance">calc_line_point_distance</A><SPAN class="op">(</SPAN>curve_points<SPAN class="op">[</SPAN>idx1<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>x<SPAN class="op">,</SPAN>  curve_points<SPAN class="op">[</SPAN>idx1<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>y<SPAN class="op">,</SPAN>
                                                                curve_points<SPAN class="op">[</SPAN>idx2<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>x<SPAN class="op">,</SPAN>  curve_points<SPAN class="op">[</SPAN>idx2<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>y<SPAN class="op">,</SPAN>
                                                                reference_points<SPAN class="op">[</SPAN>i<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>x<SPAN class="op">,</SPAN> reference_points<SPAN class="op">[</SPAN>i<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>y<SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                <SPAN class="kw1">if</SPAN><SPAN class="op">(</SPAN>err <SPAN class="op">&gt;</SPAN> max_error<SPAN class="op">)</SPAN> max_error <SPAN class="op">=</SPAN> err<SPAN class="op">;</SPAN>
            <SPAN class="op">}</SPAN>
        <SPAN class="op">}</SPAN>

        <SPAN class="kw1">double</SPAN> aerr <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">for</SPAN><SPAN class="op">(</SPAN>i <SPAN class="op">=</SPAN> <SPAN class="num">2</SPAN><SPAN class="op">;</SPAN> i <SPAN class="op">&lt;</SPAN> curve_points<SPAN class="op">.</SPAN>size<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN> i<SPAN class="op">++</SPAN><SPAN class="op">)</SPAN>
        <SPAN class="op">{</SPAN>
            <SPAN class="kw1">double</SPAN> a1 <SPAN class="op">=</SPAN> atan2<SPAN class="op">(</SPAN>curve_points<SPAN class="op">[</SPAN>i<SPAN class="op">-</SPAN><SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>y <SPAN class="op">-</SPAN> curve_points<SPAN class="op">[</SPAN>i<SPAN class="op">-</SPAN><SPAN class="num">2</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>y<SPAN class="op">,</SPAN> 
                              curve_points<SPAN class="op">[</SPAN>i<SPAN class="op">-</SPAN><SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>x <SPAN class="op">-</SPAN> curve_points<SPAN class="op">[</SPAN>i<SPAN class="op">-</SPAN><SPAN class="num">2</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>x<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            <SPAN class="kw1">double</SPAN> a2 <SPAN class="op">=</SPAN> atan2<SPAN class="op">(</SPAN>curve_points<SPAN class="op">[</SPAN>i<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>y <SPAN class="op">-</SPAN> curve_points<SPAN class="op">[</SPAN>i<SPAN class="op">-</SPAN><SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>y<SPAN class="op">,</SPAN> 
                              curve_points<SPAN class="op">[</SPAN>i<SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>x <SPAN class="op">-</SPAN> curve_points<SPAN class="op">[</SPAN>i<SPAN class="op">-</SPAN><SPAN class="num">1</SPAN><SPAN class="op">]</SPAN><SPAN class="op">.</SPAN>x<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

            <SPAN class="kw1">double</SPAN> da <SPAN class="op">=</SPAN> fabs<SPAN class="op">(</SPAN>a1 <SPAN class="op">-</SPAN> a2<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            <SPAN class="kw1">if</SPAN><SPAN class="op">(</SPAN>da <SPAN class="op">&gt;=</SPAN> agg::<A href="../__code/include/agg_basics.h.html#pi">pi</A><SPAN class="op">)</SPAN> da <SPAN class="op">=</SPAN> <SPAN class="num">2</SPAN><SPAN class="op">*</SPAN>agg::<A href="../__code/include/agg_basics.h.html#pi">pi</A> <SPAN class="op">-</SPAN> da<SPAN class="op">;</SPAN>
            <SPAN class="kw1">if</SPAN><SPAN class="op">(</SPAN>da <SPAN class="op">&gt;</SPAN> aerr<SPAN class="op">)</SPAN> aerr <SPAN class="op">=</SPAN> da<SPAN class="op">;</SPAN>
        <SPAN class="op">}</SPAN>


        <SPAN class="op">*</SPAN>max_angle_error <SPAN class="op">=</SPAN> aerr <SPAN class="op">*</SPAN> <SPAN class="num">180</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN> <SPAN class="op">/</SPAN> agg::<A href="../__code/include/agg_basics.h.html#pi">pi</A><SPAN class="op">;</SPAN>
        <SPAN class="kw1">return</SPAN> max_error <SPAN class="op">*</SPAN> scale<SPAN class="op">;</SPAN>
    <SPAN class="op">}</SPAN>



    <SPAN class="kw1">virtual</SPAN> <SPAN class="kw1">void</SPAN> on_draw<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN>
    <SPAN class="op">{</SPAN>
        <A href="../doc/basic_renderers/basic_renderers.agdoc.html#pixfmt">pixfmt</A> pf<SPAN class="op">(</SPAN>rbuf_window<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <A href="../doc/basic_renderers/basic_renderers.agdoc.html#renderer_base">renderer_base</A> ren_base<SPAN class="op">(</SPAN>pf<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        ren_base<SPAN class="op">.</SPAN>clear<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba">rgba</A><SPAN class="op">(</SPAN><SPAN class="num">1</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">.</SPAN><SPAN class="num">95</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        renderer_scanline ren<SPAN class="op">(</SPAN>ren_base<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        rasterizer_scanline ras<SPAN class="op">;</SPAN>
        scanline sl<SPAN class="op">;</SPAN>

        agg::<A href="../__code/include/agg_path_storage.h.html#path_storage">path_storage</A> path<SPAN class="op">;</SPAN>

        <SPAN class="kw1">double</SPAN> x<SPAN class="op">,</SPAN> y<SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> curve_time <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>

        path<SPAN class="op">.</SPAN>remove_all<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::<A href="../__code/include/agg_curves.h.html#curve4">curve4</A> curve<SPAN class="op">;</SPAN>
        curve<SPAN class="op">.</SPAN>approximation_method<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_curves.h.html#curve_approximation_method_e">curve_approximation_method_e</A><SPAN class="op">(</SPAN>m_curve_type<SPAN class="op">.</SPAN>cur_item<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        curve<SPAN class="op">.</SPAN>approximation_scale<SPAN class="op">(</SPAN>m_approximation_scale<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        curve<SPAN class="op">.</SPAN>angle_tolerance<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_basics.h.html#deg2rad">deg2rad</A><SPAN class="op">(</SPAN>m_angle_tolerance<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        curve<SPAN class="op">.</SPAN>cusp_limit<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_basics.h.html#deg2rad">deg2rad</A><SPAN class="op">(</SPAN>m_cusp_limit<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        curve_time <SPAN class="op">=</SPAN> measure_time<SPAN class="op">(</SPAN>curve<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> max_angle_error_01 <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> max_angle_error_1 <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> max_angle_error1 <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> max_angle_error_10 <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> max_angle_error_100 <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> max_error_01 <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> max_error_1 <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> max_error1 <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> max_error_10 <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">double</SPAN> max_error_100 <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>

        max_error_01   <SPAN class="op">=</SPAN> calc_max_error<SPAN class="op">(</SPAN>curve<SPAN class="op">,</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">.</SPAN><SPAN class="num">01</SPAN><SPAN class="op">,</SPAN> <SPAN class="op">&amp;</SPAN>max_angle_error_01<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        max_error_1    <SPAN class="op">=</SPAN> calc_max_error<SPAN class="op">(</SPAN>curve<SPAN class="op">,</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">.</SPAN><SPAN class="num">1</SPAN><SPAN class="op">,</SPAN>  <SPAN class="op">&amp;</SPAN>max_angle_error_1<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        max_error1     <SPAN class="op">=</SPAN> calc_max_error<SPAN class="op">(</SPAN>curve<SPAN class="op">,</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">,</SPAN>    <SPAN class="op">&amp;</SPAN>max_angle_error1<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        max_error_10   <SPAN class="op">=</SPAN> calc_max_error<SPAN class="op">(</SPAN>curve<SPAN class="op">,</SPAN> <SPAN class="num">10</SPAN><SPAN class="op">,</SPAN>   <SPAN class="op">&amp;</SPAN>max_angle_error_10<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        max_error_100  <SPAN class="op">=</SPAN> calc_max_error<SPAN class="op">(</SPAN>curve<SPAN class="op">,</SPAN> <SPAN class="num">100</SPAN><SPAN class="op">,</SPAN>  <SPAN class="op">&amp;</SPAN>max_angle_error_100<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        curve<SPAN class="op">.</SPAN>approximation_scale<SPAN class="op">(</SPAN>m_approximation_scale<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        curve<SPAN class="op">.</SPAN>angle_tolerance<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_basics.h.html#deg2rad">deg2rad</A><SPAN class="op">(</SPAN>m_angle_tolerance<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        curve<SPAN class="op">.</SPAN>cusp_limit<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_basics.h.html#deg2rad">deg2rad</A><SPAN class="op">(</SPAN>m_cusp_limit<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        curve<SPAN class="op">.</SPAN>init<SPAN class="op">(</SPAN>m_curve1<SPAN class="op">.</SPAN>x1<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y1<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                   m_curve1<SPAN class="op">.</SPAN>x2<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y2<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                   m_curve1<SPAN class="op">.</SPAN>x3<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y3<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN>
                   m_curve1<SPAN class="op">.</SPAN>x4<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y4<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        path<SPAN class="op">.</SPAN>concat_path<SPAN class="op">(</SPAN>curve<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
<SPAN class="rem">//path.move_to(m_curve1.x1(), m_curve1.y1());</SPAN>
<SPAN class="rem">//path.line_to(m_curve1.x2(), m_curve1.y2());</SPAN>
<SPAN class="rem">//path.line_to(m_curve1.x3(), m_curve1.y3());</SPAN>
<SPAN class="rem">//path.line_to(m_curve1.x4(), m_curve1.y4());</SPAN>


        agg::<A href="../__code/include/agg_conv_stroke.h.html#conv_stroke">conv_stroke</A><SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_path_storage.h.html#path_storage">path_storage</A><SPAN class="op">&gt;</SPAN> stroke<SPAN class="op">(</SPAN>path<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        stroke<SPAN class="op">.</SPAN>width<SPAN class="op">(</SPAN>m_width<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        stroke<SPAN class="op">.</SPAN>line_join<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_math_stroke.h.html#line_join_e">line_join_e</A><SPAN class="op">(</SPAN>m_line_join<SPAN class="op">.</SPAN>cur_item<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        stroke<SPAN class="op">.</SPAN>line_cap<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_math_stroke.h.html#line_cap_e">line_cap_e</A><SPAN class="op">(</SPAN>m_line_cap<SPAN class="op">.</SPAN>cur_item<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        stroke<SPAN class="op">.</SPAN>inner_join<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_math_stroke.h.html#inner_join_e">inner_join_e</A><SPAN class="op">(</SPAN>m_inner_join<SPAN class="op">.</SPAN>cur_item<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        stroke<SPAN class="op">.</SPAN>inner_miter_limit<SPAN class="op">(</SPAN><SPAN class="num">1</SPAN><SPAN class="op">.</SPAN><SPAN class="num">01</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        ras<SPAN class="op">.</SPAN>add_path<SPAN class="op">(</SPAN>stroke<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        ren<SPAN class="op">.</SPAN>color<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba">rgba</A><SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">.</SPAN><SPAN class="num">5</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">.</SPAN><SPAN class="num">5</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::<A href="../__code/include/agg_renderer_scanline.h.html#render_scanlines">render_scanlines</A><SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        <SPAN class="kw1">unsigned</SPAN> cmd<SPAN class="op">;</SPAN>
        <SPAN class="kw1">unsigned</SPAN> num_points1 <SPAN class="op">=</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">;</SPAN>
        path<SPAN class="op">.</SPAN>rewind<SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="kw1">while</SPAN><SPAN class="op">(</SPAN><SPAN class="op">!</SPAN>agg::<A href="../__code/include/agg_basics.h.html#is_stop">is_stop</A><SPAN class="op">(</SPAN>cmd <SPAN class="op">=</SPAN> path<SPAN class="op">.</SPAN>vertex<SPAN class="op">(</SPAN><SPAN class="op">&amp;</SPAN>x<SPAN class="op">,</SPAN> <SPAN class="op">&amp;</SPAN>y<SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN>
        <SPAN class="op">{</SPAN>
            <SPAN class="kw1">if</SPAN><SPAN class="op">(</SPAN>m_show_points<SPAN class="op">.</SPAN>status<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN>
            <SPAN class="op">{</SPAN>
                agg::<A href="../__code/include/agg_ellipse.h.html#ellipse">ellipse</A> ell<SPAN class="op">(</SPAN>x<SPAN class="op">,</SPAN> y<SPAN class="op">,</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">.</SPAN><SPAN class="num">5</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">.</SPAN><SPAN class="num">5</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">8</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                ras<SPAN class="op">.</SPAN>add_path<SPAN class="op">(</SPAN>ell<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                ren<SPAN class="op">.</SPAN>color<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba">rgba</A><SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">.</SPAN><SPAN class="num">5</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                agg::<A href="../__code/include/agg_renderer_scanline.h.html#render_scanlines">render_scanlines</A><SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            <SPAN class="op">}</SPAN>
            <SPAN class="op">++</SPAN>num_points1<SPAN class="op">;</SPAN>
        <SPAN class="op">}</SPAN>

        <SPAN class="kw1">if</SPAN><SPAN class="op">(</SPAN>m_show_outline<SPAN class="op">.</SPAN>status<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN>
        <SPAN class="op">{</SPAN>
            <SPAN class="rem">// Draw a stroke of the stroke to see the internals</SPAN>
            <SPAN class="rem">//--------------</SPAN>
            agg::<A href="../__code/include/agg_conv_stroke.h.html#conv_stroke">conv_stroke</A><SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_conv_stroke.h.html#conv_stroke">conv_stroke</A><SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_path_storage.h.html#path_storage">path_storage</A><SPAN class="op">&gt;</SPAN> <SPAN class="op">&gt;</SPAN> stroke2<SPAN class="op">(</SPAN>stroke<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            ras<SPAN class="op">.</SPAN>add_path<SPAN class="op">(</SPAN>stroke2<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            ren<SPAN class="op">.</SPAN>color<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba">rgba</A><SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">0</SPAN><SPAN class="op">.</SPAN><SPAN class="num">5</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            agg::<A href="../__code/include/agg_renderer_scanline.h.html#render_scanlines">render_scanlines</A><SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="op">}</SPAN>

        <SPAN class="rem">// Check <A href="../__code/include/agg_ellipse.h.html#ellipse">ellipse</A> and <A href="../__code/include/agg_arc.h.html#arc">arc</A> for the number of points</SPAN>
        <SPAN class="rem">//---------------</SPAN>
        <SPAN class="rem">//agg::<A href="../__code/include/agg_ellipse.h.html#ellipse">ellipse</A> a(100, 100, m_width.value(), m_width.value(), 0);</SPAN>
        <SPAN class="rem">//ras.add_path(a);</SPAN>
        <SPAN class="rem">//ren.color(agg::<A href="../__code/include/agg_color_rgba.h.html#rgba">rgba</A>(0.5,0,0, 0.5));</SPAN>
        <SPAN class="rem">//agg::<A href="../__code/include/agg_renderer_scanline.h.html#render_scanlines">render_scanlines</A>(ras, sl, ren);</SPAN>
        <SPAN class="rem">//a.rewind(0);</SPAN>
        <SPAN class="rem">//while(!agg::<A href="../__code/include/agg_basics.h.html#is_stop">is_stop</A>(cmd = a.vertex(&amp;x, &amp;y)))</SPAN>
        <SPAN class="rem">//{</SPAN>
        <SPAN class="rem">//    if(agg::<A href="../__code/include/agg_basics.h.html#is_vertex">is_vertex</A>(cmd))</SPAN>
        <SPAN class="rem">//    {</SPAN>
        <SPAN class="rem">//        agg::<A href="../__code/include/agg_ellipse.h.html#ellipse">ellipse</A> ell(x, y, 1.5, 1.5, 8);</SPAN>
        <SPAN class="rem">//        ras.add_path(ell);</SPAN>
        <SPAN class="rem">//        ren.color(agg::<A href="../__code/include/agg_color_rgba.h.html#rgba">rgba</A>(0,0,0,0.5));</SPAN>
        <SPAN class="rem">//        agg::<A href="../__code/include/agg_renderer_scanline.h.html#render_scanlines">render_scanlines</A>(ras, sl, ren);</SPAN>
        <SPAN class="rem">//    }</SPAN>
        <SPAN class="rem">//}</SPAN>


        <SPAN class="rem">// Check a circle with huge radius (10,000,000) and high approximation accuracy</SPAN>
        <SPAN class="rem">//---------------</SPAN>
        <SPAN class="rem">//double circle_pnt_count = 0;</SPAN>
        <SPAN class="rem">//agg::<A href="../__code/include/agg_bezier_arc.h.html#bezier_arc">bezier_arc</A> ell(0,0, 10000000, 10000000, 0, 2*agg::<A href="../__code/include/agg_basics.h.html#pi">pi</A>);</SPAN>
        <SPAN class="rem">//agg::<A href="../__code/include/agg_conv_curve.h.html#conv_curve">conv_curve</A>&lt;agg::<A href="../__code/include/agg_bezier_arc.h.html#bezier_arc">bezier_arc</A>, agg::<A href="../__code/include/agg_curves.h.html#curve3_div">curve3_div</A>, agg::curve4_div3&gt; crv(ell);</SPAN>
        <SPAN class="rem">//crv.approximation_scale(10.0);</SPAN>
        <SPAN class="rem">//crv.rewind(0);</SPAN>
        <SPAN class="rem">//while(crv.vertex(&amp;x, &amp;y)) ++circle_pnt_count;</SPAN>


        <SPAN class="kw1">char</SPAN> buf<SPAN class="op">[</SPAN><SPAN class="num">512</SPAN><SPAN class="op">]</SPAN><SPAN class="op">;</SPAN> 
        agg::<A href="../__code/include/agg_gsv_text.h.html#gsv_text">gsv_text</A> t<SPAN class="op">;</SPAN>
        t<SPAN class="op">.</SPAN>size<SPAN class="op">(</SPAN><SPAN class="num">8</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        agg::<A href="../__code/include/agg_conv_stroke.h.html#conv_stroke">conv_stroke</A><SPAN class="op">&lt;</SPAN>agg::<A href="../__code/include/agg_gsv_text.h.html#gsv_text">gsv_text</A><SPAN class="op">&gt;</SPAN> pt<SPAN class="op">(</SPAN>t<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        pt<SPAN class="op">.</SPAN>line_cap<SPAN class="op">(</SPAN>agg::round_cap<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        pt<SPAN class="op">.</SPAN>line_join<SPAN class="op">(</SPAN>agg::round_join<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        pt<SPAN class="op">.</SPAN>width<SPAN class="op">(</SPAN><SPAN class="num">1</SPAN><SPAN class="op">.</SPAN><SPAN class="num">5</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        sprintf<SPAN class="op">(</SPAN>buf<SPAN class="op">,</SPAN> <SPAN class="str">&quot;Num Points=%d Time=%.2fmks\n\n&quot;</SPAN>
                     <SPAN class="str">&quot; Dist Error: x0.01=%.5f x0.1=%.5f x1=%.5f x10=%.5f x100=%.5f\n\n&quot;</SPAN>
                     <SPAN class="str">&quot;Angle Error: x0.01=%.1f x0.1=%.1f x1=%.1f x10=%.1f x100=%.1f&quot;</SPAN><SPAN class="op">,</SPAN> 
                num_points1<SPAN class="op">,</SPAN> curve_time<SPAN class="op">,</SPAN> 
                max_error_01<SPAN class="op">,</SPAN>  
                max_error_1<SPAN class="op">,</SPAN>   
                max_error1<SPAN class="op">,</SPAN>   
                max_error_10<SPAN class="op">,</SPAN>  
                max_error_100<SPAN class="op">,</SPAN>
                max_angle_error_01<SPAN class="op">,</SPAN>
                max_angle_error_1<SPAN class="op">,</SPAN>
                max_angle_error1<SPAN class="op">,</SPAN>
                max_angle_error_10<SPAN class="op">,</SPAN>
                max_angle_error_100<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        t<SPAN class="op">.</SPAN>start_point<SPAN class="op">(</SPAN><SPAN class="num">10</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">85</SPAN><SPAN class="op">.</SPAN><SPAN class="num">0</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        t<SPAN class="op">.</SPAN>text<SPAN class="op">(</SPAN>buf<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        ras<SPAN class="op">.</SPAN>add_path<SPAN class="op">(</SPAN>pt<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        ren<SPAN class="op">.</SPAN>color<SPAN class="op">(</SPAN>agg::<A href="../__code/include/agg_color_rgba.h.html#rgba">rgba</A><SPAN class="op">(</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN><SPAN class="num">0</SPAN><SPAN class="op">,</SPAN><SPAN class="num">0</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::<A href="../__code/include/agg_renderer_scanline.h.html#render_scanlines">render_scanlines</A><SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>

        agg::render_ctrl<SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren_base<SPAN class="op">,</SPAN> m_curve1<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::render_ctrl<SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren_base<SPAN class="op">,</SPAN> m_angle_tolerance<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::render_ctrl<SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren_base<SPAN class="op">,</SPAN> m_approximation_scale<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::render_ctrl<SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren_base<SPAN class="op">,</SPAN> m_cusp_limit<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::render_ctrl<SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren_base<SPAN class="op">,</SPAN> m_width<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::render_ctrl<SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren_base<SPAN class="op">,</SPAN> m_show_points<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::render_ctrl<SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren_base<SPAN class="op">,</SPAN> m_show_outline<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::render_ctrl<SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren_base<SPAN class="op">,</SPAN> m_curve_type<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::render_ctrl<SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren_base<SPAN class="op">,</SPAN> m_case_type<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::render_ctrl<SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren_base<SPAN class="op">,</SPAN> m_inner_join<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::render_ctrl<SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren_base<SPAN class="op">,</SPAN> m_line_join<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        agg::render_ctrl<SPAN class="op">(</SPAN>ras<SPAN class="op">,</SPAN> sl<SPAN class="op">,</SPAN> ren_base<SPAN class="op">,</SPAN> m_line_cap<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
    <SPAN class="op">}</SPAN>

    
    <SPAN class="kw1">virtual</SPAN> <SPAN class="kw1">void</SPAN> on_key<SPAN class="op">(</SPAN><SPAN class="kw1">int</SPAN> x<SPAN class="op">,</SPAN> <SPAN class="kw1">int</SPAN> y<SPAN class="op">,</SPAN> <SPAN class="kw1">unsigned</SPAN> key<SPAN class="op">,</SPAN> <SPAN class="kw1">unsigned</SPAN> flags<SPAN class="op">)</SPAN>
    <SPAN class="op">{</SPAN>
        <SPAN class="kw1">if</SPAN><SPAN class="op">(</SPAN>key <SPAN class="op">==</SPAN> <SPAN class="str">&#039; &#039;</SPAN><SPAN class="op">)</SPAN>
        <SPAN class="op">{</SPAN>
            FILE<SPAN class="op">*</SPAN> fd <SPAN class="op">=</SPAN> fopen<SPAN class="op">(</SPAN>full_file_name<SPAN class="op">(</SPAN><SPAN class="str">&quot;coord&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> <SPAN class="str">&quot;w&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            fprintf<SPAN class="op">(</SPAN>fd<SPAN class="op">,</SPAN> <SPAN class="str">&quot;%.3f, %.3f, %.3f, %.3f, %.3f, %.3f, %.3f, %.3f&quot;</SPAN><SPAN class="op">,</SPAN> 
                         m_curve1<SPAN class="op">.</SPAN>x1<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y1<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> 
                         m_curve1<SPAN class="op">.</SPAN>x2<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y2<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> 
                         m_curve1<SPAN class="op">.</SPAN>x3<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y3<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> 
                         m_curve1<SPAN class="op">.</SPAN>x4<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">,</SPAN> m_curve1<SPAN class="op">.</SPAN>y4<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            fclose<SPAN class="op">(</SPAN>fd<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="op">}</SPAN>
    <SPAN class="op">}</SPAN>

    <SPAN class="kw1">virtual</SPAN> <SPAN class="kw1">void</SPAN> on_ctrl_change<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN>
    <SPAN class="op">{</SPAN>
        <SPAN class="kw1">if</SPAN><SPAN class="op">(</SPAN>m_case_type<SPAN class="op">.</SPAN>cur_item<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">!=</SPAN> m_cur_case_type<SPAN class="op">)</SPAN>
        <SPAN class="op">{</SPAN>
            <SPAN class="kw1">switch</SPAN><SPAN class="op">(</SPAN>m_case_type<SPAN class="op">.</SPAN>cur_item<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">)</SPAN>
            <SPAN class="op">{</SPAN>
            <SPAN class="kw1">case</SPAN> <SPAN class="num">0</SPAN>: <SPAN class="rem">//m_case_type.add_item(&quot;Random&quot;);</SPAN>
                <SPAN class="op">{</SPAN>
                    <SPAN class="kw1">int</SPAN> w <SPAN class="op">=</SPAN> <SPAN class="kw1">int</SPAN><SPAN class="op">(</SPAN>width<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">-</SPAN> <SPAN class="num">120</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                    <SPAN class="kw1">int</SPAN> h <SPAN class="op">=</SPAN> <SPAN class="kw1">int</SPAN><SPAN class="op">(</SPAN>height<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">-</SPAN> <SPAN class="num">80</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                    m_curve1<SPAN class="op">.</SPAN>curve<SPAN class="op">(</SPAN>rand<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">%</SPAN> w<SPAN class="op">,</SPAN> rand<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">%</SPAN> h <SPAN class="op">+</SPAN> <SPAN class="num">80</SPAN><SPAN class="op">,</SPAN> rand<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">%</SPAN> w<SPAN class="op">,</SPAN> rand<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">%</SPAN> h <SPAN class="op">+</SPAN> <SPAN class="num">80</SPAN><SPAN class="op">,</SPAN>
                                   rand<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">%</SPAN> w<SPAN class="op">,</SPAN> rand<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">%</SPAN> h <SPAN class="op">+</SPAN> <SPAN class="num">80</SPAN><SPAN class="op">,</SPAN> rand<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">%</SPAN> w<SPAN class="op">,</SPAN> rand<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN> <SPAN class="op">%</SPAN> h <SPAN class="op">+</SPAN> <SPAN class="num">80</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                <SPAN class="op">}</SPAN>
                <SPAN class="kw1">break</SPAN><SPAN class="op">;</SPAN>

            <SPAN class="kw1">case</SPAN> <SPAN class="num">1</SPAN>: <SPAN class="rem">//m_case_type.add_item(&quot;13---24&quot;);</SPAN>
                m_curve1<SPAN class="op">.</SPAN>curve<SPAN class="op">(</SPAN><SPAN class="num">150</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">150</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">350</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">150</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">150</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">150</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">350</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">150</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                <SPAN class="rem">//m_curve1.curve(252, 227, 16, 227, 506, 227, 285, 227);</SPAN>
                <SPAN class="rem">//m_curve1.curve(252, 227, 16, 227, 387, 227, 285, 227);</SPAN>
                <SPAN class="kw1">break</SPAN><SPAN class="op">;</SPAN>

            <SPAN class="kw1">case</SPAN> <SPAN class="num">2</SPAN>: <SPAN class="rem">//m_case_type.add_item(&quot;Smooth Cusp 1&quot;);</SPAN>
                m_curve1<SPAN class="op">.</SPAN>curve<SPAN class="op">(</SPAN><SPAN class="num">50</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">142</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">483</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">251</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">496</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">62</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">26</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">333</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                <SPAN class="kw1">break</SPAN><SPAN class="op">;</SPAN>

            <SPAN class="kw1">case</SPAN> <SPAN class="num">3</SPAN>: <SPAN class="rem">//m_case_type.add_item(&quot;Smooth Cusp 2&quot;);</SPAN>
                m_curve1<SPAN class="op">.</SPAN>curve<SPAN class="op">(</SPAN><SPAN class="num">50</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">142</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">484</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">251</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">496</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">62</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">26</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">333</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                <SPAN class="kw1">break</SPAN><SPAN class="op">;</SPAN>

            <SPAN class="kw1">case</SPAN> <SPAN class="num">4</SPAN>: <SPAN class="rem">//m_case_type.add_item(&quot;Real Cusp 1&quot;);</SPAN>
                m_curve1<SPAN class="op">.</SPAN>curve<SPAN class="op">(</SPAN><SPAN class="num">100</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">100</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">300</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">200</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">200</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">200</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">200</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">100</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                <SPAN class="kw1">break</SPAN><SPAN class="op">;</SPAN>

            <SPAN class="kw1">case</SPAN> <SPAN class="num">5</SPAN>: <SPAN class="rem">//m_case_type.add_item(&quot;Real Cusp 2&quot;);</SPAN>
                m_curve1<SPAN class="op">.</SPAN>curve<SPAN class="op">(</SPAN><SPAN class="num">475</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">157</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">200</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">100</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">453</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">100</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">222</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">157</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                <SPAN class="kw1">break</SPAN><SPAN class="op">;</SPAN>

            <SPAN class="kw1">case</SPAN> <SPAN class="num">6</SPAN>: <SPAN class="rem">//m_case_type.add_item(&quot;Fancy Stroke&quot;);</SPAN>
                m_curve1<SPAN class="op">.</SPAN>curve<SPAN class="op">(</SPAN><SPAN class="num">129</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">233</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">32</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">283</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">258</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">285</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">159</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">232</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                m_width<SPAN class="op">.</SPAN>value<SPAN class="op">(</SPAN><SPAN class="num">100</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                <SPAN class="kw1">break</SPAN><SPAN class="op">;</SPAN>

            <SPAN class="kw1">case</SPAN> <SPAN class="num">7</SPAN>: <SPAN class="rem">//m_case_type.add_item(&quot;Jaw&quot;);</SPAN>
                m_curve1<SPAN class="op">.</SPAN>curve<SPAN class="op">(</SPAN><SPAN class="num">100</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">100</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">300</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">200</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">264</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">286</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">264</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">284</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                <SPAN class="kw1">break</SPAN><SPAN class="op">;</SPAN>

            <SPAN class="kw1">case</SPAN> <SPAN class="num">8</SPAN>: <SPAN class="rem">//m_case_type.add_item(&quot;Ugly Jaw&quot;);</SPAN>
                m_curve1<SPAN class="op">.</SPAN>curve<SPAN class="op">(</SPAN><SPAN class="num">100</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">100</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">413</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">304</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">264</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">286</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">264</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">284</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
                <SPAN class="kw1">break</SPAN><SPAN class="op">;</SPAN>
            <SPAN class="op">}</SPAN>
            force_redraw<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
            m_cur_case_type <SPAN class="op">=</SPAN> m_case_type<SPAN class="op">.</SPAN>cur_item<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
        <SPAN class="op">}</SPAN>
    <SPAN class="op">}</SPAN>
<SPAN class="op">}</SPAN><SPAN class="op">;</SPAN>


<SPAN class="kw1">int</SPAN> agg_main<SPAN class="op">(</SPAN><SPAN class="kw1">int</SPAN> argc<SPAN class="op">,</SPAN> <SPAN class="kw1">char</SPAN><SPAN class="op">*</SPAN> argv<SPAN class="op">[</SPAN><SPAN class="op">]</SPAN><SPAN class="op">)</SPAN>
<SPAN class="op">{</SPAN>
    the_application app<SPAN class="op">(</SPAN>agg::pix_format_bgr24<SPAN class="op">,</SPAN> flip_y<SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
    app<SPAN class="op">.</SPAN>caption<SPAN class="op">(</SPAN><SPAN class="str">&quot;AGG Example&quot;</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
    <SPAN class="kw1">if</SPAN><SPAN class="op">(</SPAN>app<SPAN class="op">.</SPAN>init<SPAN class="op">(</SPAN><SPAN class="num">655</SPAN><SPAN class="op">,</SPAN> <SPAN class="num">520</SPAN><SPAN class="op">,</SPAN> agg::window_resize<SPAN class="op">)</SPAN><SPAN class="op">)</SPAN>
    <SPAN class="op">{</SPAN>
        <SPAN class="kw1">return</SPAN> app<SPAN class="op">.</SPAN>run<SPAN class="op">(</SPAN><SPAN class="op">)</SPAN><SPAN class="op">;</SPAN>
    <SPAN class="op">}</SPAN>
    <SPAN class="kw1">return</SPAN> <SPAN class="num">1</SPAN><SPAN class="op">;</SPAN>
<SPAN class="op">}</SPAN>





</PRE></TD></TR></TABLE><FONT style="margin-left:1em"><I></I></FONT><TABLE width="640px" bgcolor="#583927" height="1px" border="0" cellspacing="0" cellpadding="0" style="margin:0px;"><TR><TD></TD></TR></TABLE>
<TABLE width="640px" border="0" cellspacing="0" cellpadding="0">
<TR><TD><CENTER><SPAN class="authors">
Copyright <SPAN class="larger">&#169;</SPAN> 2002-2006
<A href="../mcseem/index.html"><B>Maxim Shemanarev</B></A>
</SPAN></CENTER></TD></TR>
<TR><TD><CENTER><SPAN class="authors">
Web Design and Programming
<A href="../mcseem/index.html"><B>Maxim Shemanarev</B></A>
</SPAN></CENTER></TD></TR>
</TABLE>
<BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/>
<BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/>
<BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/>
<BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/><BR/>
</HTML>
